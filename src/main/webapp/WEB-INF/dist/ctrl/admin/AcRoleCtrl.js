angular.module("myApp").controller("AcRoleCtrl",["$scope","$rootScope","$mdDialog","$http","$anchorScroll","$location",function(t,e,i,o,c,s){t.pagination={start:0,limit:10,sort:"id",dir:"desc",maxSize:8,currentPage:1,limitOptions:[10,20,50,100]},t.searchForm={extLimit:t.pagination},t.isLoading=!1,t.filter={show:!1},t.selectedItems={},t.search=function(){t.isLoading=!0,c("content"),o.post(ctx+"/admin/AcRoleCtrl/search",t.searchForm).success(function(e){t.dataList=e,t.isLoading=!1})},t.pageChanged=function(){t.pagination.start=(t.pagination.currentPage-1)*t.pagination.limit,t.search()},t.clearSearch=function(){t.searchForm={extLimit:t.pagination},t.search()},t.edit=function(){var o;if(0==Object.keys(t.selectedItems).length);else{if(1!=Object.keys(t.selectedItems).length)return void t.$root.$broadcast("notify",{type:"error",title:"错误",info:"请选中一个项目后再执行该操作！",timeOut:2e3});o=Object.keys(t.selectedItems)[0]}i.show({templateUrl:ctx+"/templates/admin/AcRoleEditTpl.html?v=",controller:"AcRoleEditCtrl",clickOutsideToClose:!0,fullscreen:e.customFullscreen,resolve:{id:function(){return o}}}).then(function(e){"success"==e&&(t.selectedItems={},t.search())})},t.del=function(){if(1!=Object.keys(t.selectedItems).length)return void t.$root.$broadcast("notify",{type:"error",title:"错误",info:"请选中一个项目后再执行该操作！",timeOut:2e3});var e=Object.keys(t.selectedItems)[0],c=t.selectedItems[e],s=i.confirm().title("确认").textContent("确认删除: "+c.name+" ?").ariaLabel("确认").ok("确认").cancel("取消");i.show(s).then(function(){t.promise=o.get(ctx+"/admin/AcRoleCtrl/delete?id="+c.id).success(function(e){"success"==e.result?(t.selectedItems={},t.$root.$broadcast("notify",{type:"success",title:"提示",info:"删除成功",timeOut:2e3}),t.search()):t.$root.$broadcast("notify",{type:"error",title:"错误",info:e.info,timeOut:2e3})})})},t.search()}]),myApp.controller("AcRoleEditCtrl",["$scope","$mdDialog","$http","id",function(t,e,i,o){t.editForm={},t.editForm.id=o,o&&o>0?(t.title="编辑",t.promise=i.get(ctx+"/admin/AcRoleCtrl/getDetailInfo?id="+o).success(function(e){t.editForm=e.data})):t.title="新增",t.save=function(){t.promise=i.post(ctx+"/admin/AcRoleCtrl/save",t.editForm).success(function(i){"success"==i.result?(t.$root.$broadcast("notify",{type:"success",title:"提示",info:"保存成功",timeOut:2e3}),e.hide("success")):t.$root.$broadcast("notify",{type:"error",title:"错误",info:i.info,timeOut:2e3})})},t.cancel=function(){e.cancel()}}]);