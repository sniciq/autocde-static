angular.module("myApp").controller("AcUserCtrl",["$scope","$rootScope","$http","$mdDialog","$location","$anchorScroll",function(t,e,i,s,c,o){t.pagination={start:0,limit:10,sort:"id",dir:"desc",maxSize:8,currentPage:1,limitOptions:[10,20,50,100]},t.searchForm={extLimit:t.pagination},t.isLoading=!1,t.selectedItems={},t.search=function(){t.isLoading=!0,o("content"),i.post(ctx+"/admin/AcUserCtrl/search",t.searchForm).success(function(e){t.dataList=e,t.isLoading=!1})},t.pageChanged=function(){t.pagination.start=(t.pagination.currentPage-1)*t.pagination.limit,t.search()},t.clearSearch=function(){t.searchForm={extLimit:t.pagination},t.search()},t.edit=function(){var i;if(0==Object.keys(t.selectedItems).length);else{if(1!=Object.keys(t.selectedItems).length)return void t.$root.$broadcast("notify",{type:"error",title:"错误",info:"请选中一个项目后再执行该操作！",timeOut:2e3});i=Object.keys(t.selectedItems)[0]}s.show({templateUrl:ctx+"/templates/admin/AcUserEditTpl.html?v=",controller:"AcUserEditCtrl",clickOutsideToClose:!0,fullscreen:e.customFullscreen,resolve:{id:function(){return i}}}).then(function(e){"success"==e&&(t.search(),t.selectedItems={})})},t.del=function(e){if(1!=Object.keys(t.selectedItems).length)return void t.$root.$broadcast("notify",{type:"error",title:"错误",info:"请选中一个项目后再执行该操作！",timeOut:2e3});var c=Object.keys(t.selectedItems)[0],e=t.selectedItems[c],o=s.confirm().title("确认").textContent("确认删除: "+e.name+" ?").ariaLabel("确认").ok("确认").cancel("取消");s.show(o).then(function(){t.promise=i.get(ctx+"/admin/AcUserCtrl/delete?id="+e.id).success(function(e){"success"==e.result?(t.selectedItems={},t.$root.$broadcast("notify",{type:"success",title:"提示",info:"删除成功",timeOut:2e3}),t.search()):t.$root.$broadcast("notify",{type:"error",title:"错误",info:e.info,timeOut:2e3})})})},t.search()}]),myApp.controller("AcUserEditCtrl",["$scope","$http","$mdDialog","id",function(t,e,i,s){t.editForm={},t.editForm.id=s,s&&s>0?(t.title="编辑",t.promise=e.get(ctx+"/admin/AcUserCtrl/getDetailInfo?id="+s).success(function(e){t.editForm=e.data})):t.title="新增",t.save=function(){t.promise=e.post(ctx+"/admin/AcUserCtrl/save",t.editForm).success(function(e){"success"==e.result?(t.$root.$broadcast("notify",{type:"success",title:"提示",info:"保存成功",timeOut:2e3}),i.hide("success")):t.$root.$broadcast("notify",{type:"error",title:"错误",info:e.info,timeOut:2e3})})},t.cancel=function(){i.cancel()}}]);